<!DOCTYPE html>
<html lang="pt-br">
  <style>
  
  .logo-img {
  height: 80px;
}
  #sidebar {
  width: 220px;
  background: #0d2b4d;
  color: white;
  min-height: 100vh;
}

#sidebar .nav-link {
  color: #cfd8e3;
  cursor: pointer;
  padding: 10px 15px;
  border-radius: 6px;
  margin-bottom: 4px;
  transition: 0.2s;
}

#sidebar .nav-link:hover {
  background: #1e4b7a;
  color: #fff;
}

#sidebar .nav-link.active {
  background: #2563eb;
  color: #fff;
  font-weight: bold;
}

.div-invisivel {
  display: none;
}
</style>
<head>
<meta charset="UTF-8">
<title>Telatendimento 197 â€“ PolÃ­cia Civil</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>

<header class="page-header">
  <div class="header-inner">
    <img src="img/logo.png" class="logo-img logo-index">
  </div>
</header>

<div id="app-root" class="d-flex">

<!-- SIDEBAR -->
<div id="sidebar">
  <div class="sidebar-body">
    <div id="main-menu" class="nav flex-column mt-3">
      <div class="nav-link active" onclick="showSection('triagem')">ğŸ“ Triagem 197</div>
      <div class="nav-link" onclick="showSection('cad')">ğŸ§¾ Registro PC</div>
      <div class="nav-link" onclick="showSection('rechamadas')">ğŸ” Recontato</div>
      <div class="nav-link" onclick="showSection('trote')">âŒ Trote</div>
    </div>
  </div>
</div>

<!-- CONTEÃšDO -->
<div id="main-content" class="p-3 flex-fill">

<div class="card shadow-sm">
<div class="card-body">

<!-- TRIAGEM -->
<div id="triagem" class="dynamic-content">
  <h4 id="question"></h4>
  <div id="guidance" class="alert alert-primary"></div>
  <div id="options" class="mb-2"></div>
  <button class="btn btn-outline-secondary btn-sm" onclick="back()">â¬… Voltar</button>

  <label class="mt-3 fw-bold">ğŸ“ Bloco de Notas</label>
  <textarea id="notepad" class="form-control" rows="7" placeholder="Registro do atendente 197..."></textarea>
  <div class="mt-2">
      <button class="btn btn-success btn-sm" onclick="copyNotes()">ğŸ“‹ Copiar</button>
      <button class="btn btn-danger btn-sm" onclick="clearNotes()">ğŸ—‘ Limpar</button>
  </div>
</div>

<!-- REGISTRO -->
<div id="cad" class="dynamic-content div-invisivel">
<h4>ğŸ§¾ Registro de OcorrÃªncia â€“ PolÃ­cia Civil</h4>

<div class="alert alert-primary">
<strong>Objetivo:</strong> Registrar ocorrÃªncia no sistema da PolÃ­cia Civil para investigaÃ§Ã£o ou providÃªncias.
</div>

<ul>
<li>Nome do solicitante (ou AnÃ´nimo)</li>
<li>Telefone com DDD</li>
<li>EndereÃ§o completo</li>
<li>DescriÃ§Ã£o detalhada dos fatos</li>
<li>IdentificaÃ§Ã£o de envolvidos</li>
<li>VÃ­timas e autores</li>
</ul>
</div>

<!-- RECHAMADAS -->
<div id="rechamadas" class="dynamic-content div-invisivel">
<h4>ğŸ” Recontato do CidadÃ£o</h4>
<ul>
<li>Verificar se jÃ¡ existe protocolo</li>
<li>Atualizar informaÃ§Ãµes</li>
<li>Orientar andamento</li>
</ul>
</div>

<!-- TROTE -->
<div id="trote" class="dynamic-content div-invisivel">
<h4>Trote</h4>
<pre>Esta Ã© uma linha oficial da PolÃ­cia Civil. A ligaÃ§Ã£o serÃ¡ encerrada.</pre>
</div>

</div>
</div>

</div>
</div>

<script>
// ===============================
// ÃRVORE DE DECISÃƒO DO 197
// ===============================
const tree = {

1:{
q:"CENTO E NOVENTA E SETE. QUAL Ã‰ SUA OCORRÃŠNCIA?",
g:"Identificar o tipo de fato e se hÃ¡ urgÃªncia.",
o:[
 {text:"Ã“bito / cadÃ¡ver",n:10},
 {text:"Crime jÃ¡ ocorrido",n:20},
 {text:"Pessoa desaparecida",n:30},
 {text:"Mandado de prisÃ£o",n:40},
 {text:"AmeaÃ§a / denÃºncia",n:50},
 {text:"InformaÃ§Ãµes",n:300},
 {text:"Trote",n:400}
]},

10:{
q:"O Ã³bito ocorreu em hospital ou em local externo?",
g:"Define o tipo de remoÃ§Ã£o.",
o:[
 {text:"Hospital",n:11},
 {text:"Local de crime / acidente",n:12}
]},

11:{q:"HÃ¡ mÃ©dico que constatou o Ã³bito?",g:"NecessÃ¡rio para remoÃ§Ã£o.",o:[{text:"Sim",n:150},{text:"NÃ£o",n:150}]},
12:{q:"O local estÃ¡ preservado?",g:"Fundamental para perÃ­cia.",o:[{text:"Sim",n:150},{text:"NÃ£o",n:150}]},

20:{
q:"O autor estÃ¡ identificado?",
g:"Ajuda na investigaÃ§Ã£o.",
o:[
 {text:"Sim",n:150},
 {text:"NÃ£o",n:200}
]},

30:{q:"Ã‰ menor de idade?",g:"Prioridade.",o:[{text:"Sim",n:150},{text:"NÃ£o",n:200}]},
40:{q:"Sabe onde o procurado estÃ¡?",g:"Permite captura.",o:[{text:"Sim",n:150},{text:"NÃ£o",n:200}]},
50:{q:"HÃ¡ risco imediato?",g:"Encaminhar para PM.",o:[{text:"Sim",n:150},{text:"NÃ£o",n:200}]},

150:{q:"AÃ‡ÃƒO DA POLÃCIA CIVIL",g:"Registrar ocorrÃªncia e acionar unidade competente.",o:[]},
200:{q:"Fato pretÃ©rito",g:"Orientar registro na delegacia.",o:[]},
300:{q:"InformaÃ§Ã£o",g:"Orientar o cidadÃ£o.",o:[]},
400:{q:"Trote",g:"Encerrar chamada.",o:[]}

};

let stack=[],cur=1;

function render(){
const n=tree[cur];
question.innerText=n.q;
guidance.innerText=n.g;
options.innerHTML="";
n.o.forEach(o=>{
let b=document.createElement("button");
b.className="btn btn-primary btn-sm me-1 mb-1";
b.innerText=o.text;
b.onclick=()=>{notepad.value+=n.q+" â†’ "+o.text+"\n";stack.push(cur);cur=o.n;render();};
options.appendChild(b);
});
}

function back(){if(stack.length){cur=stack.pop();render();}}

function showSection(id){
  // esconder todos
  document.querySelectorAll(".dynamic-content").forEach(s=>{
    s.classList.add("div-invisivel");
  });

  // mostrar selecionado
  const sec = document.getElementById(id);
  if(sec) sec.classList.remove("div-invisivel");

  // remover destaque
  document.querySelectorAll("#main-menu .nav-link").forEach(l=>{
    l.classList.remove("active");
  });

  // ativar botÃ£o correto
  const btn = document.querySelector(`#main-menu .nav-link[onclick="showSection('${id}')"]`);
  if(btn) btn.classList.add("active");
}


function copyNotes(){notepad.select();document.execCommand("copy");}
function clearNotes(){if(confirm("Limpar bloco de notas?"))notepad.value="";}

window.onload = ()=>{
  notepad.value="";
  render();
  showSection("triagem"); // forÃ§a abrir na triagem
};
</script>

</body>
</html>
